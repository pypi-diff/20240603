# Comparing `tmp/wrabbit-0.1.2-py3-none-any.whl.zip` & `tmp/wrabbit-0.1.3-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,46 +1,46 @@
-Zip file size: 42837 bytes, number of entries: 44
--rw-r--r--  2.0 unx      240 b- defN 24-Jan-22 13:52 parser/__init__.py
--rw-r--r--  2.0 unx     4304 b- defN 24-Feb-05 13:41 parser/constants.py
--rw-r--r--  2.0 unx    14347 b- defN 24-Feb-05 13:41 parser/nextflow.py
--rw-r--r--  2.0 unx     9121 b- defN 24-Feb-05 13:41 parser/utils.py
--rw-r--r--  2.0 unx     1240 b- defN 24-Feb-05 13:41 sb_types/__init__.py
--rw-r--r--  2.0 unx       21 b- defN 24-Jan-22 13:36 sb_types/port.py
--rw-r--r--  2.0 unx       28 b- defN 24-Jan-19 14:42 sb_types/requirements.py
--rw-r--r--  2.0 unx     2126 b- defN 24-Jan-29 10:13 sb_types/sb_types.py
--rw-r--r--  2.0 unx        0 b- defN 24-Apr-30 11:48 wrabbit/__init__.py
--rw-r--r--  2.0 unx     1192 b- defN 24-Apr-30 11:48 wrabbit/exceptions.py
--rw-r--r--  2.0 unx       22 b- defN 24-May-21 11:53 wrabbit/version.py
--rw-r--r--  2.0 unx      240 b- defN 24-Apr-30 11:48 wrabbit/parser/__init__.py
--rw-r--r--  2.0 unx     4532 b- defN 24-Apr-30 11:48 wrabbit/parser/constants.py
--rw-r--r--  2.0 unx    17065 b- defN 24-Apr-30 11:48 wrabbit/parser/nextflow.py
--rw-r--r--  2.0 unx    10949 b- defN 24-May-21 11:54 wrabbit/parser/utils.py
--rw-r--r--  2.0 unx     3994 b- defN 24-Apr-30 11:48 wrabbit/parser/js_templates/sample_sheet_generator.js
--rw-r--r--  2.0 unx      192 b- defN 24-Apr-30 11:48 wrabbit/parser/js_templates/sample_sheet_switch.js
--rw-r--r--  2.0 unx     1259 b- defN 24-Apr-29 12:16 wrabbit/sb_types/__init__.py
--rw-r--r--  2.0 unx       21 b- defN 24-Jan-22 13:36 wrabbit/sb_types/port.py
--rw-r--r--  2.0 unx       28 b- defN 24-Jan-19 14:42 wrabbit/sb_types/requirements.py
--rw-r--r--  2.0 unx     2126 b- defN 24-Jan-29 10:13 wrabbit/sb_types/sb_types.py
--rw-r--r--  2.0 unx     2173 b- defN 24-Apr-30 11:48 wrabbit/specification/__init__.py
--rw-r--r--  2.0 unx      974 b- defN 24-May-07 11:08 wrabbit/specification/binding.py
--rw-r--r--  2.0 unx      843 b- defN 24-May-21 11:51 wrabbit/specification/hints.py
--rw-r--r--  2.0 unx     1018 b- defN 24-May-07 11:08 wrabbit/specification/listing.py
--rw-r--r--  2.0 unx    10920 b- defN 24-May-07 11:08 wrabbit/specification/node.py
--rw-r--r--  2.0 unx     5219 b- defN 24-Apr-25 12:51 wrabbit/specification/node_types.py
--rw-r--r--  2.0 unx     2813 b- defN 24-Apr-29 12:16 wrabbit/specification/port.py
--rw-r--r--  2.0 unx     1674 b- defN 24-May-07 11:08 wrabbit/specification/requirements.py
--rw-r--r--  2.0 unx      704 b- defN 24-May-07 15:01 wrabbit/specification/sbg.py
--rw-r--r--  2.0 unx        0 b- defN 24-Apr-30 11:48 wrabbit/specification/utils.py
--rw-r--r--  2.0 unx        0 b- defN 24-Apr-30 11:48 wrabbit/wrapper/__init__.py
--rw-r--r--  2.0 unx        0 b- defN 24-Apr-30 11:48 wrabbit/wrapper/constants.py
--rw-r--r--  2.0 unx      440 b- defN 24-Apr-30 11:48 wrabbit/wrapper/utils.py
--rw-r--r--  2.0 unx     8018 b- defN 24-May-07 15:01 wrabbit/wrapper/wrapper.py
--rw-r--r--  2.0 unx        0 b- defN 24-Jan-19 09:20 wrapper/__init__.py
--rw-r--r--  2.0 unx        0 b- defN 24-Jan-22 13:36 wrapper/constants.py
--rw-r--r--  2.0 unx        0 b- defN 24-Jan-19 09:18 wrapper/utils.py
--rw-r--r--  2.0 unx     6595 b- defN 24-Jan-22 13:36 wrapper/wrapper.py
--rw-r--r--  2.0 unx    11341 b- defN 24-May-21 11:56 wrabbit-0.1.2.dist-info/LICENSE
--rw-r--r--  2.0 unx     1715 b- defN 24-May-21 11:56 wrabbit-0.1.2.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 24-May-21 11:56 wrabbit-0.1.2.dist-info/WHEEL
--rw-r--r--  2.0 unx        8 b- defN 24-May-21 11:56 wrabbit-0.1.2.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     3593 b- defN 24-May-21 11:56 wrabbit-0.1.2.dist-info/RECORD
-44 files, 131187 bytes uncompressed, 37117 bytes compressed:  71.7%
+Zip file size: 43624 bytes, number of entries: 44
+-rwxrwxrwx  2.0 unx      240 b- defN 24-Jan-22 13:52 parser/__init__.py
+-rwxrwxrwx  2.0 unx     4304 b- defN 24-Feb-05 13:41 parser/constants.py
+-rwxrwxrwx  2.0 unx    14347 b- defN 24-Feb-05 13:41 parser/nextflow.py
+-rwxrwxrwx  2.0 unx     9121 b- defN 24-Feb-05 13:41 parser/utils.py
+-rwxrwxrwx  2.0 unx     1240 b- defN 24-Feb-05 13:41 sb_types/__init__.py
+-rwxrwxrwx  2.0 unx       21 b- defN 24-Jan-22 13:36 sb_types/port.py
+-rwxrwxrwx  2.0 unx       28 b- defN 24-Jan-19 14:42 sb_types/requirements.py
+-rwxrwxrwx  2.0 unx     2126 b- defN 24-Jan-29 10:13 sb_types/sb_types.py
+-rwxrwxrwx  2.0 unx        0 b- defN 24-Apr-30 11:48 wrabbit/__init__.py
+-rwxrwxrwx  2.0 unx     1192 b- defN 24-Apr-30 11:48 wrabbit/exceptions.py
+-rw-r--r--  2.0 unx       22 b- defN 24-May-29 10:24 wrabbit/version.py
+-rwxrwxrwx  2.0 unx      240 b- defN 24-Apr-30 11:48 wrabbit/parser/__init__.py
+-rw-r--r--  2.0 unx     4582 b- defN 24-May-29 10:21 wrabbit/parser/constants.py
+-rw-r--r--  2.0 unx    17291 b- defN 24-May-31 08:40 wrabbit/parser/nextflow.py
+-rw-r--r--  2.0 unx    10685 b- defN 24-May-31 13:49 wrabbit/parser/utils.py
+-rwxrwxrwx  2.0 unx     3996 b- defN 24-May-30 12:45 wrabbit/parser/js_templates/sample_sheet_generator.js
+-rwxrwxrwx  2.0 unx      192 b- defN 24-Apr-30 11:48 wrabbit/parser/js_templates/sample_sheet_switch.js
+-rwxrwxrwx  2.0 unx     1259 b- defN 24-Apr-29 12:16 wrabbit/sb_types/__init__.py
+-rwxrwxrwx  2.0 unx       21 b- defN 24-Jan-22 13:36 wrabbit/sb_types/port.py
+-rwxrwxrwx  2.0 unx       28 b- defN 24-Jan-19 14:42 wrabbit/sb_types/requirements.py
+-rwxrwxrwx  2.0 unx     2126 b- defN 24-Jan-29 10:13 wrabbit/sb_types/sb_types.py
+-rwxrwxrwx  2.0 unx     2173 b- defN 24-Apr-30 11:48 wrabbit/specification/__init__.py
+-rwxrwxrwx  2.0 unx      974 b- defN 24-May-07 11:08 wrabbit/specification/binding.py
+-rwxrwxrwx  2.0 unx      843 b- defN 24-May-21 11:51 wrabbit/specification/hints.py
+-rwxrwxrwx  2.0 unx     1018 b- defN 24-May-07 11:08 wrabbit/specification/listing.py
+-rw-r--r--  2.0 unx    11325 b- defN 24-May-30 12:51 wrabbit/specification/node.py
+-rwxrwxrwx  2.0 unx     5219 b- defN 24-Apr-25 12:51 wrabbit/specification/node_types.py
+-rwxrwxrwx  2.0 unx     2813 b- defN 24-Apr-29 12:16 wrabbit/specification/port.py
+-rw-r--r--  2.0 unx     1690 b- defN 24-May-30 12:56 wrabbit/specification/requirements.py
+-rw-r--r--  2.0 unx     2785 b- defN 24-May-31 13:48 wrabbit/specification/sbg.py
+-rwxrwxrwx  2.0 unx        0 b- defN 24-Apr-30 11:48 wrabbit/specification/utils.py
+-rwxrwxrwx  2.0 unx        0 b- defN 24-Apr-30 11:48 wrabbit/wrapper/__init__.py
+-rwxrwxrwx  2.0 unx        0 b- defN 24-Apr-30 11:48 wrabbit/wrapper/constants.py
+-rwxrwxrwx  2.0 unx      440 b- defN 24-Apr-30 11:48 wrabbit/wrapper/utils.py
+-rw-r--r--  2.0 unx     8213 b- defN 24-May-31 08:40 wrabbit/wrapper/wrapper.py
+-rwxrwxrwx  2.0 unx        0 b- defN 24-Jan-19 09:20 wrapper/__init__.py
+-rwxrwxrwx  2.0 unx        0 b- defN 24-Jan-22 13:36 wrapper/constants.py
+-rwxrwxrwx  2.0 unx        0 b- defN 24-Jan-19 09:18 wrapper/utils.py
+-rwxrwxrwx  2.0 unx     6595 b- defN 24-Jan-22 13:36 wrapper/wrapper.py
+-rwxrwxrwx  2.0 unx    11341 b- defN 24-Jun-03 11:27 wrabbit-0.1.3.dist-info/LICENSE
+-rw-r--r--  2.0 unx     1740 b- defN 24-Jun-03 11:27 wrabbit-0.1.3.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 24-Jun-03 11:27 wrabbit-0.1.3.dist-info/WHEEL
+-rwxrwxrwx  2.0 unx        8 b- defN 24-Jun-03 11:27 wrabbit-0.1.3.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     3594 b- defN 24-Jun-03 11:27 wrabbit-0.1.3.dist-info/RECORD
+44 files, 133924 bytes uncompressed, 37904 bytes compressed:  71.7%
```

## zipnote {}

```diff
@@ -111,23 +111,23 @@
 
 Filename: wrapper/utils.py
 Comment: 
 
 Filename: wrapper/wrapper.py
 Comment: 
 
-Filename: wrabbit-0.1.2.dist-info/LICENSE
+Filename: wrabbit-0.1.3.dist-info/LICENSE
 Comment: 
 
-Filename: wrabbit-0.1.2.dist-info/METADATA
+Filename: wrabbit-0.1.3.dist-info/METADATA
 Comment: 
 
-Filename: wrabbit-0.1.2.dist-info/WHEEL
+Filename: wrabbit-0.1.3.dist-info/WHEEL
 Comment: 
 
-Filename: wrabbit-0.1.2.dist-info/top_level.txt
+Filename: wrabbit-0.1.3.dist-info/top_level.txt
 Comment: 
 
-Filename: wrabbit-0.1.2.dist-info/RECORD
+Filename: wrabbit-0.1.3.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## wrabbit/version.py

```diff
@@ -1 +1 @@
-__version__ = "0.1.2"
+__version__ = "0.1.3"
```

## wrabbit/parser/constants.py

```diff
@@ -1,10 +1,11 @@
 from enum import Enum
 from wrabbit.parser import read_js_template
 
+
 # ############################## Generic Bits ############################### #
 # keep track of what extensions are applicable for processing
 
 class EXTENSIONS:
     yaml = 'yaml'
     yml = 'yml'
     json = 'json'
@@ -16,15 +17,15 @@
 
 
 # ############################ CWL Standard Bits ############################ #
 # A generic SB input array of files that should be available on the
 # instance but are not explicitly provided to the execution as wdl params.
 SAMPLE_SHEET_FUNCTION = read_js_template("sample_sheet_generator.js")
 SAMPLE_SHEET_SWITCH = read_js_template("sample_sheet_switch.js")
-SB_SAMPLES_SCHEMA_DEFAULT_NAME = "samplesheet.csv"
+SB_SAMPLES_SCHEMA_DEFAULT_NAME = "samplesheet_schema.yaml"
 
 GENERIC_FILE_ARRAY_INPUT = {
     "id": 'auxiliary_files',
     "type": [
         'null',
         {
             'type': 'array',
@@ -133,14 +134,15 @@
 # ############################## Nextflow Bits ############################## #
 # Keys that should be skipped when parsing nextflow tower yaml file
 
 NF_CONFIG_DEFAULT_NAME = 'nextflow.config'
 NF_SCHEMA_DEFAULT_NAME = 'nextflow_schema.json'
 SB_SCHEMA_DEFAULT_NAME = 'sb_nextflow_schema'
 README_DEFAULT_NAME = 'README.md'
+MINIMUM_SUPPORTED_NF_VERSION = "21.10.0"
 
 # Mappings of nextflow input fields to SB input fields
 #  nextflow_key: cwl_key mapping
 NF_TO_CWL_PORT_MAP = {
     'default': 'sbg:toolDefaultValue',
     'description': 'label',
     'help_text': 'doc',
```

## wrabbit/parser/nextflow.py

```diff
@@ -12,14 +12,15 @@
     get_executor_version,
     create_profile_enum,
     nf_to_sb_input_mapper,
     get_tower_yml,
     get_dict_depth,
     get_entrypoint,
     get_docs_file,
+    get_sample_sheet_schema,
 )
 
 from wrabbit.parser.constants import (
     sample_sheet,
     ExecMode,
     SB_SCHEMA_DEFAULT_NAME,
     EXTENSIONS,
@@ -70,14 +71,16 @@
         self.sb_wrapper = SbWrapper(label)
         self.workflow_path = workflow_path
 
         # Locate nextflow files in the package if possible
         self.nf_config_files = get_config_files(self.workflow_path) or []
         self.nf_schema_path = get_nf_schema(self.workflow_path)
         self.readme_path = get_docs_file(self.workflow_path)
+        self.sb_samplesheet_schema = get_sample_sheet_schema(
+            self.workflow_path)
 
         self.sb_doc = sb_doc
 
         # app contents
         self.entrypoint = entrypoint
         self.executor_version = executor_version
         self.sb_package_id = sb_package_id
@@ -184,15 +187,15 @@
             manifest_data = parse_manifest(file)
 
             self.entrypoint = self.entrypoint or manifest_data.get(
                 'mainScript', None) or get_entrypoint(self.workflow_path)
 
             executor_version = manifest_data.get('nextflowVersion', None)
             if executor_version:
-                executor_version = get_executor_version(executor_version)[-1]
+                executor_version = get_executor_version(executor_version)
             self.executor_version = self.executor_version or executor_version
 
             tk_author = manifest_data.get('author', None)
             if not self.sb_wrapper.toolkit_author:
                 self.sb_wrapper.add_toolkit_author(tk_author)
 
             home_page = manifest_data.get('homePage', None)
@@ -206,14 +209,18 @@
             if manifest_data:
                 # Stop searching if manifest is found
                 break
 
         self.executor_version = self.executor_version or \
                                 get_executor_version(self.sb_doc)
 
+        # Confirm if the executor version is valid.
+        # If it is below 22.10.1 it is not supported.
+        self.executor_version.correct_version()
+
         # step2: add links
 
         links = []  # sbg:links
         # {
         #     "id": "https://github.com/alexdobin/STAR",
         #     "label": "STAR"
         # },
@@ -234,16 +241,17 @@
         self.sb_wrapper.cwl_version = 'None'
         self.sb_wrapper.class_ = 'nextflow'
 
         self.generate_sb_inputs()
         self.generate_sb_outputs()
         self.generate_app_data()
 
-        if sample_sheet_schema:
-            self.parse_sample_sheet_schema(open(sample_sheet_schema))
+        if sample_sheet_schema or self.sb_samplesheet_schema:
+            self.parse_sample_sheet_schema(open(
+                sample_sheet_schema or self.sb_samplesheet_schema))
 
         self.sb_wrapper.set_app_content(
             code_package=sb_package_id or self.sb_package_id,
             entrypoint=sb_entrypoint or self.entrypoint,
             executor_version=executor_version or self.executor_version,
         )
 
@@ -332,33 +340,29 @@
         #    - new input must not clash with other inputs by ID
         # Ensure that the new input is unique
 
         # Create the sample sheet file array input
         file_input = self.sb_wrapper.safe_add_input(
             SAMPLE_SHEET_FILE_ARRAY_INPUT
         )
-        file_input_id = file_input.get('id')
+        file_input_id = file_input.id_
 
         # Step 2:
         # add argument for sample sheet
         #    - requires: sample sheet input (sample_sheet_input),
         #                file input (ss_file_input)
         #    - if the sample sheet is provided on input,
         #      do not generate a new ss
-        input_changes = {
-            'id': sample_sheet_input,
-            'loadContents': True
-        }
-
-        prefix = self.sb_wrapper.get_input(
+        ss_input = self.sb_wrapper.get_input(
             sample_sheet_input
-        )['inputBinding']['prefix']
+        )
+        ss_input.set_property('loadContents', True)
+        prefix = ss_input.binding.prefix
+        ss_input.unbind()
 
-        self.sb_wrapper.remove_input(sample_sheet_input)
-        self.sb_wrapper.add_input(input_changes)
         self.sb_wrapper.add_argument(
             {
                 "prefix": prefix,
                 "shellQuote": False,
                 "valueFrom": SAMPLE_SHEET_SWITCH.format(
                     file_input=f"inputs.{file_input_id}",
                     sample_sheet=f"inputs.{sample_sheet_input}",
```

## wrabbit/parser/utils.py

```diff
@@ -12,14 +12,17 @@
     DirectoryType,
     IntegerType,
     FloatType,
     BooleanType,
     InputPort,
     Binding,
 )
+from wrabbit.specification.sbg import (
+    ExecutorVersion,
+)
 
 from wrabbit.parser.constants import (
     NF_TO_CWL_PORT_MAP,
     SB_SCHEMA_DEFAULT_NAME,
     SB_SAMPLES_SCHEMA_DEFAULT_NAME,
     NF_SCHEMA_DEFAULT_NAME,
     README_DEFAULT_NAME,
@@ -233,70 +236,61 @@
     for file in os.listdir(path):
         if file.lower() == README_DEFAULT_NAME.lower():
             return os.path.join(path, file)
     else:
         return None
 
 
-def get_executor_version(string):
+def verify_version(sign: str, version: str, plus: str = ""):
+    if plus == "+":
+        sign = ">="
+
+    if sign in ["%E2%89%A5", ">=", "!>="]:
+        sign = ">="
+    elif sign in ["!>", ">"]:
+        sign = ">"
+    elif sign in ["%E2%89%A4", "<=", "!<="]:
+        sign = "<="
+    elif sign in ["!<", "<"]:
+        sign = "<"
+    elif not sign:
+        sign = "="
+    print(
+        f"Identified nextflow executor version requirement "
+        f"'{sign} {version}'"
+    )
+    return sign, version
+
+
+def get_executor_version(string: str):
     # from description
     result = re.findall(
         r"\[Nextflow]\([^(]+(%E2%89%A5|%E2%89%A4|=|>|<)(\d{2}\.\d+\.\d+)[^)]+\)",
         string
     )
 
     if result:
-        sign, version = result.pop(0)
-        if sign in ["%E2%89%A5", ">=", "!>="]:
-            sign = ">="
-        elif sign in ["!>", ">"]:
-            sign = ">"
-        elif sign in ["%E2%89%A4", "<=", "!<="]:
-            sign = "<="
-        elif sign in ["!<", "<"]:
-            sign = "<"
-        elif not sign:
-            sign = "="
-        print(
-            f"Identified nextflow executor version requirement "
-            f"{sign} {version}"
-        )
-        return sign, version
+        return verify_version(*result.pop(0))
 
     result = re.findall(
         r"((?:[!><=]+|))([0-9.]+)((?:\+|))",
         string
     )
 
+    # from
+    f_version = None, None
     if result:
-        result = result[0]
+        f_version = verify_version(*result[0])
 
-        if result[2] == "+":
-            sign = ">="
-        else:
-            sign = result[0]
-
-        version = result[1]
-        if sign in ["%E2%89%A5", ">=", "!>="]:
-            sign = ">="
-        elif sign in ["!>", ">"]:
-            sign = ">"
-        elif sign in ["%E2%89%A4", "<=", "!<="]:
-            sign = "<="
-        elif sign in ["!<", "<"]:
-            sign = "<"
-        elif not sign:
-            sign = "="
-        print(
-            f"Identified nextflow executor version requirement "
-            f"{sign} {version}"
-        )
-        return sign, version
+    # to
+    t_version = None, None
+    if len(result) > 1:
+        t_version = verify_version(*result[1])
 
-    return None, None
+    return ExecutorVersion(*f_version, *t_version)
 
 
 def get_sample_sheet_schema(path):
     ss_path = os.path.join(path, SB_SAMPLES_SCHEMA_DEFAULT_NAME)
 
     if os.path.exists(ss_path):
         logger.info(f"Located latest sample sheet schema at <{ss_path}>")
```

## wrabbit/parser/js_templates/sample_sheet_generator.js

### js-beautify {}

```diff
@@ -15,17 +15,19 @@
             }
         }
 
         var input_source = [];
         if ({
                 input_source
             }) {
-            input_source = [].concat({
-                input_source
-            }).sort(compareFiles);
+            {
+                input_source = [].concat({
+                    input_source
+                }).sort(compareFiles);
+            }
         };
         if (input_source.length == 0) {
             {
                 // Return empty file if no input files are given.
                 // Ensures that sample sheet is generated only if there are files to
                 // either:
                 //   - map onto an existing sample sheet, or
```

## wrabbit/specification/node.py

```diff
@@ -241,39 +241,46 @@
 
     def __init__(
             self,
             type_: Union[str, dict, list, NodeType] = None,
             label: Optional[str] = None,
             doc: Optional[str] = None,
             binding: Union[dict, Binding] = None,
+            load_contents: Optional[bool] = False,
             **kwargs
     ):
         self.type_ = type_ or kwargs.pop('type', None)
         if self.type_:
             self.type_ = convert_to_type(self.type_)
 
         self.label = label
         self.doc = doc
+        self.load_contents = load_contents
 
         self.binding = binding or None
         if self.binding:
             self.binding = Binding.deserialize(binding)
         self._custom_properties = dict()
         for key, value in kwargs.items():
             self.set_property(key, value)
 
+    def unbind(self):
+        self.binding = None
+
     def set_property(self, key: str, value: Any):
         if key in ('type', 'type_'):
             self.type_ = convert_to_type(value)
         elif key in ('binding', f'{self._port_type}Binding'):
             self.binding = Binding.deserialize(value)
         elif key == 'doc':
             self.doc = value
         elif key == 'label':
             self.label = value
+        elif key in ['load_contents', 'loadContents']:
+            self.load_contents = value
         else:
             self._custom_properties.update({
                 key: value
             })
 
     def update(self, inp: Union[dict]):
         for key, value in inp.items():
@@ -301,14 +308,16 @@
             temp['type'] = dict_.pop('type_').serialize()
 
         for key, value in dict_.items():
             if value is None:
                 continue
             if key in skip_keys:
                 continue
+            if key == 'load_contents' and value is False:
+                continue
 
             if hasattr(value, 'serialize'):
                 temp[key] = value.serialize()
             else:
                 temp[key] = value
 
         for key, value in sorted(self._custom_properties.items()):
@@ -375,14 +384,16 @@
             temp['type'] = dict_.pop('type_').serialize()
 
         for key, value in dict_.items():
             if value is None:
                 continue
             if key in skip_keys:
                 continue
+            if key == 'load_contents' and value is False:
+                continue
 
             if hasattr(value, 'serialize'):
                 temp[key] = value.serialize()
             else:
                 temp[key] = value
 
         for key, value in sorted(self._custom_properties.items()):
```

## wrabbit/specification/requirements.py

```diff
@@ -23,15 +23,15 @@
         self.class_ = class_ or kwargs.pop('class', None)
 
     def update(self, obj):
         if not isinstance(obj, type(self)) and obj.class_ == self.class_:
             raise SbTypeMissmatch(
                 f"Type missmatch. Cannot update {self} using {obj}"
             )
-        if hasattr(obj, 'listing'):
+        if hasattr(obj, 'listing') and obj.listing:
             for o_l in obj.listing:
                 self.add_listing(o_l)
 
     def add_listing(self, obj: Union[dict, str, Listing]):
         obj = Listing.deserialize(obj)
 
         if not self.listing:
```

## wrabbit/specification/sbg.py

```diff
@@ -1,9 +1,11 @@
 import copy
 from typing import Optional
+from packaging.version import Version
+from wrabbit.parser.constants import MINIMUM_SUPPORTED_NF_VERSION
 
 
 class Link:
     def __init__(
             self,
             id_: Optional[str],
             label: Optional[str] = None,
@@ -27,7 +29,61 @@
         id_ = None
         if "id" in l:
             id_ = l.pop('id')
         elif "id_" in l:
             id_ = l.pop("id_")
 
         return Link(id_=id_, **l)
+
+
+class ExecutorVersion:
+    def __init__(
+            self,
+            from_sign: Optional[str] = None,
+            from_version: Optional[str] = None,
+            to_sign: Optional[str] = None,
+            to_version: Optional[str] = None,
+    ):
+        self.from_sign = from_sign
+        self.from_version = from_version
+        self._from_version = None
+
+        # Edge versions are pre-release, same as rc.
+        #  Some nf executor versions use: edge, some rc#
+        if from_version:
+            self._from_version = Version(from_version.replace("edge", "rc1"))
+
+        self.to_sign = to_sign
+        self.to_version = to_version
+        self._to_version = None
+        if to_version:
+            self._to_version = Version(to_version.replace("edge", "rc1"))
+
+    def correct_version(self):
+        if not self.from_version:
+            raise ValueError(
+                "Executor Version was not set."
+            )
+        if self._from_version >= Version(MINIMUM_SUPPORTED_NF_VERSION):
+            return
+        if self.from_sign in ['<', '=', '<=']:
+            raise ValueError(
+                f"Executor version '{self.from_sign} {self.from_version}' is "
+                f"not compatible with Sevenbridges/Velsera powered platforms."
+            )
+        if self.to_sign in ['<'] and \
+                self._to_version < Version(MINIMUM_SUPPORTED_NF_VERSION):
+            raise ValueError(
+                f"Executor version '{self.from_sign} {self.from_version}', "
+                f"'{self.to_sign} {self.to_version}' is "
+                f"not compatible with Sevenbridges/Velsera powered platforms."
+            )
+
+        print(
+            "Executor version set to the minimum supported version for "
+            "Sevenbridges/Velsera powered platforms."
+        )
+        self.from_version = MINIMUM_SUPPORTED_NF_VERSION
+        self._from_version = Version(MINIMUM_SUPPORTED_NF_VERSION)
+
+    def serialize(self):
+        return self.from_version
```

## wrabbit/wrapper/wrapper.py

```diff
@@ -28,18 +28,18 @@
     doc = None
     revision_note = None
     links = None
     toolkit_author = None
     wrapper_author = None
     licence = None
 
-    def __init__(self, label: Optional[str]=None):
+    def __init__(self, label: Optional[str] = None):
         self.label = label
 
-    def get_input(self, id_):
+    def get_input(self, id_) -> Optional[InputPort]:
         if id_ not in self.inputs:
             logging.warning(f'Input with id <{id_}> not found.')
             return None
 
         return self.inputs[id_]
 
     def add_input(self, inp: Union[dict, InputPort]):
@@ -47,15 +47,15 @@
 
         if inp.id_ in self.inputs:
             logging.warning(f'Input with id <{inp.id_}> already exists. '
                             f'Skipping...')
 
         self.inputs[inp.id_] = inp
 
-    def safe_add_input(self, inp: Union[dict, InputPort]):
+    def safe_add_input(self, inp: Union[dict, InputPort]) -> InputPort:
         inp = InputPort.deserialize(inp)
 
         temp_id = inp.id_
         i = 0
         while temp_id in self.inputs:
             i += 1
             temp_id = f"{inp.id_}_{i}"
@@ -73,15 +73,15 @@
         if self.get_input(id_):
             self.get_input(id_).update(inp)
 
     def remove_input(self, id_):
         if self.get_input(id_):
             self.inputs.pop(id_)
 
-    def get_output(self, id_):
+    def get_output(self, id_) -> Optional[OutputPort]:
         if id_ not in self.outputs:
             logging.warning(f'Output with id <{id_}> not found.')
             return None
 
         return self.outputs[id_]
 
     def add_output(self, out: Union[dict, OutputPort]):
@@ -89,15 +89,15 @@
 
         if out.id_ in self.outputs:
             logging.warning(f'Output with id <{out.id_}> already exists. '
                             f'Skipping...')
 
         self.outputs[out.id_] = out
 
-    def safe_add_output(self, out: Union[dict, OutputPort]):
+    def safe_add_output(self, out: Union[dict, OutputPort]) -> OutputPort:
         out = OutputPort.deserialize(out)
 
         temp_id = out.id_
         i = 0
         while temp_id in self.outputs:
             i += 1
             temp_id = f"{out.id_}_{i}"
@@ -139,14 +139,16 @@
         payload = dict()
 
         if code_package:
             payload['code_package'] = code_package
         if entrypoint:
             payload['entrypoint'] = entrypoint
         if executor_version:
+            if hasattr(executor_version, 'serialize'):
+                executor_version = executor_version.serialize()
             payload['executor_version'] = executor_version
 
         payload.update(kwargs)
 
         self.app_content.update(payload)
 
     def add_argument(self, arg):
```

## Comparing `wrabbit-0.1.2.dist-info/LICENSE` & `wrabbit-0.1.3.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `wrabbit-0.1.2.dist-info/METADATA` & `wrabbit-0.1.3.dist-info/METADATA`

 * *Files 2% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: wrabbit
-Version: 0.1.2
+Version: 0.1.3
 Summary: Package that helps convert prepare Nextflow to be run on SevenBridges supported platforms.
 Home-page: UNKNOWN
 Author: Velsera
 Author-email: pavle.marinkovic@velsera.com
 Maintainer: Velsera
 Maintainer-email: pavle.marinkovic@velsera.com
 License: UNKNOWN
@@ -22,14 +22,15 @@
 Classifier: Programming Language :: Python :: 3.9
 Classifier: Programming Language :: Python :: 3.10
 Classifier: Programming Language :: Python :: 3 :: Only
 Requires-Python: >=3.7
 Description-Content-Type: text/markdown
 License-File: LICENSE
 Requires-Dist: PyYAML (<7.0.0)
+Requires-Dist: packaging
 
 # wrabbit
 
 ![](https://github.com/rabix/wrabbit/workflows/Tests/badge.svg)
 [![PyPI version](https://badge.fury.io/py/wrabbit.svg)](https://pypi.org/project/wrabbit/)
 
 Library for creating wrapper applications for Nextflow apps compatible with any Seven Bridges powered platform.
```

## Comparing `wrabbit-0.1.2.dist-info/RECORD` & `wrabbit-0.1.3.dist-info/RECORD`

 * *Files 5% similar despite different names*

```diff
@@ -4,41 +4,41 @@
 parser/utils.py,sha256=FyTFcmeBGZuhXc0p8r9Emit4tMj-L_d78XrF_otmdgA,9121
 sb_types/__init__.py,sha256=Dd1k4y16Apl4RDMUd0JaMJTcCV9FjKAcTfJyXdzu1xc,1240
 sb_types/port.py,sha256=auGHcMgJQhXvrfXhJtWkuGLGE2Fg02A9EKNaPkhXEzY,21
 sb_types/requirements.py,sha256=dP_T-nEUbMumlLJi76L4iP3QbJFekoX4RO0KTmjFIi0,28
 sb_types/sb_types.py,sha256=e7HPoC-5oga3pAI6U3Q7UOxruBJIYD9WTY9u92yehJw,2126
 wrabbit/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 wrabbit/exceptions.py,sha256=AYVrduvg8R3d5bsy4cM1KIWwaVrTmKI8y-DN_pz5tng,1192
-wrabbit/version.py,sha256=YvuYzWnKtqBb-IqG8HAu-nhIYAsgj9Vmc_b9o7vO-js,22
+wrabbit/version.py,sha256=XEqb2aiIn8fzGE68Mph4ck1FtQqsR_am0wRWvrYPffQ,22
 wrabbit/parser/__init__.py,sha256=Pqgm2f-lVD_zd47j1kztF9YvEGmJnE6gTJpzZh-BrhQ,240
-wrabbit/parser/constants.py,sha256=jjHAfy6GF2sUKglPrG4N0rJebEnep90dUtHymXNiXcU,4532
-wrabbit/parser/nextflow.py,sha256=IJjCCpe88aWkK5NthoI7l8Gcyu8WcbEw4erhqXGnReY,17065
-wrabbit/parser/utils.py,sha256=FW7PKyh6rvotQt3NRjF8RstPP0nznE03l5HzbxQPkfY,10949
-wrabbit/parser/js_templates/sample_sheet_generator.js,sha256=lJ_ctzR6GB2gwTkhJAv5TeQ9b9LK4Zn1A1zrXmcTPuA,3994
+wrabbit/parser/constants.py,sha256=dxORJhNd2_vI2t2RJPJ0G71lmm5gyod-oVa8DdN-YEo,4582
+wrabbit/parser/nextflow.py,sha256=5deaPB_dzlw1jncd6nxWXWyX3CUG7ElwtEEG_H1JcTk,17291
+wrabbit/parser/utils.py,sha256=DubVBwZUJEKtx5koy-Xqrhc_X7bmoln8lgKt9AeRsw8,10685
+wrabbit/parser/js_templates/sample_sheet_generator.js,sha256=Ce-WQ-ouJ7SboHjtcgQoCgBjs44QGe-Ri-WK-eCW6rg,3996
 wrabbit/parser/js_templates/sample_sheet_switch.js,sha256=JuGde_APcz1a9oNIFmIXGUHwWwjOxSa_deQlgjaloXs,192
 wrabbit/sb_types/__init__.py,sha256=o7FV5F9axXxPvAy0eWmut_fIiZNMaMbRtSHuAUvwixQ,1259
 wrabbit/sb_types/port.py,sha256=auGHcMgJQhXvrfXhJtWkuGLGE2Fg02A9EKNaPkhXEzY,21
 wrabbit/sb_types/requirements.py,sha256=dP_T-nEUbMumlLJi76L4iP3QbJFekoX4RO0KTmjFIi0,28
 wrabbit/sb_types/sb_types.py,sha256=e7HPoC-5oga3pAI6U3Q7UOxruBJIYD9WTY9u92yehJw,2126
 wrabbit/specification/__init__.py,sha256=Gdn-vsoi6pKF_HFXn50HMj3Oe_uWZZSuBIkN4Q_PmGo,2173
 wrabbit/specification/binding.py,sha256=ksk-YdbwJWqAbyvVFXBA_U_BealXBy-KbByGF3Lcp8w,974
 wrabbit/specification/hints.py,sha256=VnI_CeZD2CroYqesvm4L7f2i5EVJb8eqhUSNWA5ubEc,843
 wrabbit/specification/listing.py,sha256=dGzrrGBSd2u3D7cZdOxwyjUFdt_suDT-viSUbwwi3Dc,1018
-wrabbit/specification/node.py,sha256=firImwsChgW0BN5gWdKnU0x_q4f8JWcBJHlBhzA6ERI,10920
+wrabbit/specification/node.py,sha256=YPEUbJ0rS_5ojWznL_lHzkx9dLTVqKp7AcvRkwU1mP0,11325
 wrabbit/specification/node_types.py,sha256=HUh0j3uOCqzHbayWmvrIwC-tieyya_IloZX9unqVbAQ,5219
 wrabbit/specification/port.py,sha256=jABR_oLdgizQCSbzMrRi58KV-bBWzK9ShUEB3rXXvig,2813
-wrabbit/specification/requirements.py,sha256=Gon_KoPu54axa7d4zGtIHSiEHgTrf5BkcuyOhEIb31g,1674
-wrabbit/specification/sbg.py,sha256=P6ipPJVPgIKXhkDO2EBDD4MyvOSLypoCM4yjJ6sRUVo,704
+wrabbit/specification/requirements.py,sha256=FTyXmpuxKPq35PQHahaAE2saWQqifHuVD1kTRP8Q8e0,1690
+wrabbit/specification/sbg.py,sha256=jRfhZ1nl7Gc3y23xrGHDsLX81T9H9vQbi4iKmeo6Ju4,2785
 wrabbit/specification/utils.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 wrabbit/wrapper/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 wrabbit/wrapper/constants.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 wrabbit/wrapper/utils.py,sha256=mMfOnxCxHVv26_3FXVrY9vQKrE11R-K5hW3DdU72qKk,440
-wrabbit/wrapper/wrapper.py,sha256=aAHWIYeXLVaZm3cSvvmpN_7wUsfmtaT1xbD1M7f1RCM,8018
+wrabbit/wrapper/wrapper.py,sha256=O-c2dbSQN3ElK86eFywUUmSuy1TvydurRXB_OnX4mEY,8213
 wrapper/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 wrapper/constants.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 wrapper/utils.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 wrapper/wrapper.py,sha256=2rgk0GIj8dL8rM8edBKL1FZI3fDuAkDUeFMDcOBnXZY,6595
-wrabbit-0.1.2.dist-info/LICENSE,sha256=zx9l3cqPh4I_9LgUKCyPHtufs1J2aDGiTr4Jyj5Z5TQ,11341
-wrabbit-0.1.2.dist-info/METADATA,sha256=svVl1RI1zX_FwlN_mn4CRhw2r2b5Ag85krcULIBob8M,1715
-wrabbit-0.1.2.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
-wrabbit-0.1.2.dist-info/top_level.txt,sha256=shIADURgFUnHGUDZleIM-sWcANaRry8WmkN_ZB9-cyk,8
-wrabbit-0.1.2.dist-info/RECORD,,
+wrabbit-0.1.3.dist-info/LICENSE,sha256=zx9l3cqPh4I_9LgUKCyPHtufs1J2aDGiTr4Jyj5Z5TQ,11341
+wrabbit-0.1.3.dist-info/METADATA,sha256=-iIW3Stl-RODw3PWDqDNdDTm34WlgJls1HWOyZ_ddp4,1740
+wrabbit-0.1.3.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
+wrabbit-0.1.3.dist-info/top_level.txt,sha256=shIADURgFUnHGUDZleIM-sWcANaRry8WmkN_ZB9-cyk,8
+wrabbit-0.1.3.dist-info/RECORD,,
```

